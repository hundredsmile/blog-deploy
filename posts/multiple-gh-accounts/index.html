<!doctype html><html lang=en-US><head><title>在 Mac 上管理多个 GitHub 账号</title>
<meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><meta property="og:url" content="https://gaxu.xyz/posts/multiple-gh-accounts/"><meta property="og:site_name" content="嘉树的世界"><meta property="og:title" content="在 Mac 上管理多个 GitHub 账号"><meta property="og:description" content='动机 我有两个 GitHub 账号，希望一个是面向工作，另一个则是私人的。那么，如何在一台 Mac 上无缝切换这个两个账号呢？本文列出了关键步骤。其他操作系统应当类似。
生成 SSH 密钥 GitHub 提供了两种方式与远程仓库建立联系：SSH 和 HTTPS。简单来说，当我们向远程仓库 push 代码时，HTTPS 每次都需要提供所谓的 access token（当然这个活其实也只是第一次 push 的时候需要，因为 Mac 会把这个 token 存放在钥匙串里面，以后就不需要手动输入了），而 SSH 使用一对公钥和私钥取得认证（事先生成，然后本地和远程分别拿着私钥和公钥），不需要记住用户名和 token。就我们的目的而言，只能用 SSH 来实现。
假设我们有两个账号，personal 和 work，以下我们分别为它们生成 SSH 密钥。更多账号操作也是一样的。
cd ~/.ssh ssh-keygen -t rsa -C "email@personal.com" -f "gh-personal" ssh-keygen -t rsa -C "email@work.com" -f "gh-work" 运行完了之后，在 .ssh 文件夹下我们得到了四个文件：
gh-personal gh-personal.pub gh-work gh-work.pub 其中带 .pub 扩展名的是存公钥的，不带的是存私钥的。
分配私钥和公钥 将私钥加入 SSH Agent 上一步只是生成了密钥，还需要把私钥加入 Mac 的钥匙串 (keychain)，也就是保存密码。
ssh-add --apple-use-keychain ~/.'><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-08-27T19:29:37+08:00"><meta property="article:modified_time" content="2024-08-27T22:26:26+08:00"><meta property="article:tag" content="GitHub"><meta property="article:tag" content="命令行"><meta name=twitter:card content="summary"><meta name=twitter:title content="在 Mac 上管理多个 GitHub 账号"><meta name=twitter:description content='动机 我有两个 GitHub 账号，希望一个是面向工作，另一个则是私人的。那么，如何在一台 Mac 上无缝切换这个两个账号呢？本文列出了关键步骤。其他操作系统应当类似。
生成 SSH 密钥 GitHub 提供了两种方式与远程仓库建立联系：SSH 和 HTTPS。简单来说，当我们向远程仓库 push 代码时，HTTPS 每次都需要提供所谓的 access token（当然这个活其实也只是第一次 push 的时候需要，因为 Mac 会把这个 token 存放在钥匙串里面，以后就不需要手动输入了），而 SSH 使用一对公钥和私钥取得认证（事先生成，然后本地和远程分别拿着私钥和公钥），不需要记住用户名和 token。就我们的目的而言，只能用 SSH 来实现。
假设我们有两个账号，personal 和 work，以下我们分别为它们生成 SSH 密钥。更多账号操作也是一样的。
cd ~/.ssh ssh-keygen -t rsa -C "email@personal.com" -f "gh-personal" ssh-keygen -t rsa -C "email@work.com" -f "gh-work" 运行完了之后，在 .ssh 文件夹下我们得到了四个文件：
gh-personal gh-personal.pub gh-work gh-work.pub 其中带 .pub 扩展名的是存公钥的，不带的是存私钥的。
分配私钥和公钥 将私钥加入 SSH Agent 上一步只是生成了密钥，还需要把私钥加入 Mac 的钥匙串 (keychain)，也就是保存密码。
ssh-add --apple-use-keychain ~/.'><script async src="https://www.googletagmanager.com/gtag/js?id=G-LER46KQN8K"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-LER46KQN8K")}</script><script src=/js/toc.js></script><link type=text/css rel=stylesheet href=/vendor/css/bootstrap.min.css><link rel=stylesheet href=/scss/journal.min.ad2da485e6e2508f0b90c8b9bbc39f6fe2a3c27aec57f6da5f61d27ca10988d0.css integrity="sha256-rS2khebiUI8LkMi5u8Ofb+KjwnrsV/baX2HSfKEJiNA=" media=screen><link rel=stylesheet href=/scss/dark-mode.min.f7229ad242ba49e1ea468f47af5b72c60a1e55bb98a14d37522a08158bfbd591.css integrity="sha256-9yKa0kK6SeHqRo9Hr1tyxgoeVbuYoU03UioIFYv71ZE=" media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:500,500italic,700,700italic|Roboto:400,400italic,700,700italic|Montserrat:500,500italic,700,700italic|Fira+Mono:500,700|Noto+Serif+TC:500,700|Noto+Serif+SC:500,700|Material+Icons&display=swap"><script src=https://unpkg.com/@waline/client@v2/dist/waline.js></script><link rel=stylesheet href=https://unpkg.com/@waline/client@v2/dist/waline.css><script>console.log("Hello from 'layouts/partials/extended_head.html'")</script><link rel=stylesheet href=/vendor/css/lxgwwenkaiscreenr.css><script defer src=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/js/all.min.js></script><link rel=stylesheet href=/scss/custom/_custom.min.07270570cc4a8650f6229d55a585534fa1253613904e2c8ddf06558255549241.css integrity="sha256-BycFcMxKhlD2Ip1VpYVTT6ElNhOQTiyN3wZVglVUkkE=" media=screen><link rel=stylesheet href=/vendor/css/heti.min.css><script src=/vendor/js/heti.min.js></script><script defer>function domReady(){var e=document.querySelector(".post-subtitle");e&&e.classList.add("heti"),e=document.querySelector("#post-content"),e&&e.classList.add("heti"),document.querySelectorAll(".post-item-summary").forEach(e=>{e.classList.add("heti")})}document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),domReady()});const heti=new Heti(".heti");heti.autoSpacing()</script><script>document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementsByClassName("collapsible");for(e=0;e<t.length;e++)t[e].addEventListener("click",function(){this.classList.toggle("active");var e=this.nextElementSibling;e.style.display==="block"?e.style.display="none":e.style.display="block"})})</script></head><body><div id=app><div class=single-column-drawer-container id=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item false" href=/about>关于我
</a><a class="a-block drawer-menu-item active" href=/posts>归档
</a><a class="a-block drawer-menu-item false" href=/categories>分类
</a><a class="a-block drawer-menu-item false" href=/tags>标签
</a><a class="a-block drawer-menu-item false" href=/index.xml>订阅</a><div class=toc><div class=toc-content><center>目录</center><ul><ul><li><a href=#%e5%8a%a8%e6%9c%ba class=nav-动机>动机</a></li><li><a href=#%e7%94%9f%e6%88%90-ssh-%e5%af%86%e9%92%a5 class=nav-生成-ssh-密钥>生成 SSH 密钥</a></li><li><a href=#%e5%88%86%e9%85%8d%e7%a7%81%e9%92%a5%e5%92%8c%e5%85%ac%e9%92%a5 class=nav-分配私钥和公钥>分配私钥和公钥</a></li><ul><li><a href=#%e5%b0%86%e7%a7%81%e9%92%a5%e5%8a%a0%e5%85%a5-ssh-agent class=nav-将私钥加入-ssh-agent>将私钥加入 SSH Agent</a></li><li><a href=#%e5%b0%86%e5%85%ac%e9%92%a5%e5%8a%a0%e5%85%a5-github class=nav-将公钥加入-github>将公钥加入 GitHub</a></li></ul><li><a href=#%e9%85%8d%e7%bd%ae-ssh-%e4%b8%bb%e6%9c%ba class=nav-配置-ssh-主机>配置 SSH 主机</a></li><li><a href=#%e5%9c%a8%e4%b8%8d%e5%90%8c%e7%9a%84%e8%b4%a6%e5%8f%b7%e9%97%b4%e5%88%87%e6%8d%a2 class=nav-在不同的账号间切换>在不同的账号间切换</a></li><li><a href=#%e5%8f%82%e8%80%83 class=nav-参考>参考</a></li></ul></div></div></div></div></div><transition name=fade><div id=drawer-mask v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav id=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div id=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu
</i></button>
<a id=navTitle class=navbar-brand href=https://gaxu.xyz/>嘉树的世界
</a><button type=button class=nav-darkmode-toggle id=darkModeToggleButton2>
<i class=material-icons id=darkModeToggleIcon2>dark_mode</i></button></div></nav><div class=single-column-header-container id=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=https://gaxu.xyz/><div class=single-column-header-title>嘉树的世界</div><div class=single-column-header-subtitle>靡不有初，鲜克有终</div></a></div><div id=content><div id=streamContainer class=stream-container><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper-text-only><div class=post-title>在 Mac 上管理多个 GitHub 账号<div class=post-meta>嘉树 &nbsp;
<time itemprop=datePublished>2024-08-27 19:29
</time>&emsp;
<i class=material-icons>folder</i>
<a href=/categories/%E6%8A%80%E6%9C%AF>技术</a>
&nbsp;
<i class=material-icons>label</i>
<a href=/tags/github>GitHub</a>
&nbsp;
<a href=/tags/%E5%91%BD%E4%BB%A4%E8%A1%8C>命令行</a>
&nbsp;</div></div></div><div class=post-body-wrapper><div class=post-body v-pre><div id=post-content><h2 id=动机>动机&nbsp;<a class=hash-link href=#动机><i class="fas fa-link"></i></a></h2><p>我有两个 GitHub 账号，希望一个是面向工作，另一个则是私人的。那么，如何在一台 Mac 上无缝切换这个两个账号呢？本文列出了关键步骤。其他操作系统应当类似。</p><h2 id=生成-ssh-密钥>生成 SSH 密钥&nbsp;<a class=hash-link href=#生成-ssh-密钥><i class="fas fa-link"></i></a></h2><p>GitHub 提供了两种方式与远程仓库建立联系：SSH 和 HTTPS。简单来说，当我们向远程仓库 push 代码时，HTTPS 每次都需要提供所谓的 access token（当然这个活其实也只是第一次 push 的时候需要，因为 Mac 会把这个 token 存放在钥匙串里面，以后就不需要手动输入了），而 SSH 使用一对公钥和私钥取得认证（事先生成，然后本地和远程分别拿着私钥和公钥），不需要记住用户名和 token。就我们的目的而言，只能用 SSH 来实现。</p><p>假设我们有两个账号，personal 和 work，以下我们分别为它们生成 SSH 密钥。更多账号操作也是一样的。</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#658b00>cd</span> ~/.ssh
</span></span><span style=display:flex><span>ssh-keygen -t rsa -C <span style=color:#cd5555>&#34;email@personal.com&#34;</span> -f <span style=color:#cd5555>&#34;gh-personal&#34;</span>
</span></span><span style=display:flex><span>ssh-keygen -t rsa -C <span style=color:#cd5555>&#34;email@work.com&#34;</span> -f <span style=color:#cd5555>&#34;gh-work&#34;</span>
</span></span></code></pre></div><p>运行完了之后，在 <code>.ssh</code> 文件夹下我们得到了四个文件：</p><ul><li><code>gh-personal</code></li><li><code>gh-personal.pub</code></li><li><code>gh-work</code></li><li><code>gh-work.pub</code></li></ul><p>其中带 <code>.pub</code> 扩展名的是存公钥的，不带的是存私钥的。</p><h2 id=分配私钥和公钥>分配私钥和公钥&nbsp;<a class=hash-link href=#分配私钥和公钥><i class="fas fa-link"></i></a></h2><h3 id=将私钥加入-ssh-agent>将私钥加入 SSH Agent&nbsp;<a class=hash-link href=#将私钥加入-ssh-agent><i class="fas fa-link"></i></a></h3><p>上一步只是生成了密钥，还需要把私钥加入 Mac 的钥匙串 (keychain)，也就是保存密码。</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh-add --apple-use-keychain ~/.ssh/gh-personal
</span></span><span style=display:flex><span>ssh-add --apple-use-keychain ~/.ssh/gh-work
</span></span></code></pre></div><p>选项 <code>--apple-use-keychain</code> 就明确声明使用 Mac 的钥匙串系统存放密钥。</p><p>我们可以用以下命令来查看私钥是否被添加到了 SSH Agent：</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh-add -l
</span></span></code></pre></div><h3 id=将公钥加入-github>将公钥加入 GitHub&nbsp;<a class=hash-link href=#将公钥加入-github><i class="fas fa-link"></i></a></h3><p>然后，我们把公钥加入到对应的 GitHub 账户里去。</p><p>对账户 personal，进入 “Settings”➡️“SSH and GPG keys”，然后点击 “New SSH key”，进入一个界面，“Title” 可以随便填写，只要在 &ldquo;Key&rdquo; 的框里边粘贴 <code>gh-personal.pub</code> 文件的内容就行了，以下是用命令复制文件内容的高级做法：</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pbcopy &lt; ~/.ssh/gh-personal.pub
</span></span></code></pre></div><p>我们对另一个账户 work 进行同样的操作，只不过是要复制对应文件 <code>gh-work.pub</code> 的内容。不再赘述。</p><h2 id=配置-ssh-主机>配置 SSH 主机&nbsp;<a class=hash-link href=#配置-ssh-主机><i class="fas fa-link"></i></a></h2><p>这一步要做的是，告诉 Mac 远程仓库的主机和本地的私钥如何对应。这通过配置 SSH Config 文件实现。</p><p>首先，打开 <code>config</code> 文件：</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>open ~/.ssh/config
</span></span></code></pre></div><p>然后，填入如下设定</p><pre tabindex=0><code># Your Personal GitHub Account
Host github.com-personal
    HostName github.com
    User git
    IdentityFile ~/.ssh/gh-personal

# Your Work GitHub Account
Host github.com-work
    HostName github.com
    User git
    IdentityFile ~/.ssh/gh-work
</code></pre><p>到此为止，我们的所有准备工作就完成了。下面我们看在不同的账号间具体是怎么切换的。</p><hr><h2 id=在不同的账号间切换>在不同的账号间切换&nbsp;<a class=hash-link href=#在不同的账号间切换><i class="fas fa-link"></i></a></h2><p>假设我们实现已经全局设定了 work 账号是默认的 GitHub 账号：</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git config --global user.name <span style=color:#cd5555>&#34;work&#34;</span>
</span></span><span style=display:flex><span>git config --global user.email <span style=color:#cd5555>&#34;email@work.com&#34;</span>
</span></span></code></pre></div><p>但如果要建立一个 personal 账号下的仓库，在 <code>git init</code> 之后，就得不带 <code>--global</code> 选项：</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git config user.name <span style=color:#cd5555>&#34;personal&#34;</span>
</span></span><span style=display:flex><span>git config user.email <span style=color:#cd5555>&#34;email@personal.com&#34;</span>
</span></span></code></pre></div><p>要把这个仓库关联到远程仓库 myrepo，运行：</p><div class=highlight><pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git remote add origin git@github.com-personal:personal/myrepo.git
</span></span></code></pre></div><p>这里面需要注意，我们用的是 SSH 的链接，而不是 HTTPS 的链接，另外我们明确指定了主机名为 <code>github.com-personal</code>，而不是 GitHub 仓库页面给出的 <code>github.com</code>。</p><p>这样就可以对 myrepo 进行 push 等操作了。</p><p>如果有另外的仓库是注册在 work 账号下的，不需要再特别进行 <code>git config</code>，因前面我们已经全局指定了，但在 <code>git clone</code> work 账号下的私有仓库和关联远程仓库时，仍然要注意指定主机名为 <code>github.com-work</code>。</p><p>以上（完）。</p><h2 id=参考>参考&nbsp;<a class=hash-link href=#参考><i class="fas fa-link"></i></a></h2><ul><li><a href=https://medium.com/@viralthaker27/managing-multiple-github-accounts-on-a-macbook-a-step-by-step-guide-a22ec738180f>Managing Multiple GitHub Accounts on a MacOS: A Step-by-Step Guide.</a></li><li><a href=https://code.tutsplus.com/quick-tip-how-to-work-with-github-and-multiple-accounts--net-22574t>How to Work With GitHub and Multiple Accounts.</a></li></ul></div><div><hr width=100% id=EOF style="border-top:.6px solid #777;margin-top:2.5rem"><p style=color:#777>最后修改于 2024-08-27</p></div></div></div><nav class=post-pagination><a class=older-posts href=/posts/half-day-diary/>上回<br><em>半日杂记</em>
</a><a class=newer-posts>下回<br>已经到头啦。</a></nav><div class=post-comment-wrapper><div id=waline></div><script>Waline.init({el:"#waline",dark:"body.night",serverURL:"https://mysitecomments-2yzw3y3tk-cwleo.vercel.app"})</script></div></div></div></div></div><div id=sideContainer class=side-container><a class="a-block nav-head false" href=https://gaxu.xyz/><div class=nav-title>嘉树的世界</div><div class=nav-subtitle>靡不有初，鲜克有终</div></a><div class=nav-link-list><a class="a-block nav-link-item false" href=/about>关于我
</a><a class="a-block nav-link-item active" href=/posts>归档
</a><a class="a-block nav-link-item false" href=/categories>分类
</a><a class="a-block nav-link-item false" href=/tags>标签
</a><a class="a-block nav-link-item false" href=/index.xml>订阅</a></div><div class=nav-footer>由 <a href=https://gohugo.io>Hugo</a> 强力驱动<br>主题改动自 <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a><br>&copy;
2023–2024 嘉树.
本站遵循 <a href=https://creativecommons.org/licenses/by-nc/4.0/>CC-BY-NC 4.0</a> 协议</div></div><div id=extraContainer class=extra-container><div class=toc-wrapper><div class=toc><div class=toc-content><center>目录</center><ul><ul><li><a href=#%e5%8a%a8%e6%9c%ba class=nav-动机>动机</a></li><li><a href=#%e7%94%9f%e6%88%90-ssh-%e5%af%86%e9%92%a5 class=nav-生成-ssh-密钥>生成 SSH 密钥</a></li><li><a href=#%e5%88%86%e9%85%8d%e7%a7%81%e9%92%a5%e5%92%8c%e5%85%ac%e9%92%a5 class=nav-分配私钥和公钥>分配私钥和公钥</a></li><ul><li><a href=#%e5%b0%86%e7%a7%81%e9%92%a5%e5%8a%a0%e5%85%a5-ssh-agent class=nav-将私钥加入-ssh-agent>将私钥加入 SSH Agent</a></li><li><a href=#%e5%b0%86%e5%85%ac%e9%92%a5%e5%8a%a0%e5%85%a5-github class=nav-将公钥加入-github>将公钥加入 GitHub</a></li></ul><li><a href=#%e9%85%8d%e7%bd%ae-ssh-%e4%b8%bb%e6%9c%ba class=nav-配置-ssh-主机>配置 SSH 主机</a></li><li><a href=#%e5%9c%a8%e4%b8%8d%e5%90%8c%e7%9a%84%e8%b4%a6%e5%8f%b7%e9%97%b4%e5%88%87%e6%8d%a2 class=nav-在不同的账号间切换>在不同的账号间切换</a></li><li><a href=#%e5%8f%82%e8%80%83 class=nav-参考>参考</a></li></ul></div></div></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up
</i></a><a type=button class=pagination-action id=darkModeToggleButton><span class="material-icons pagination-action-icon" id=darkModeToggleIcon>dark_mode</span></a></div></div><div id=single-column-footer>由 <a href=https://gohugo.io>Hugo</a> 强力驱动<br>主题改动自 <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a><br>&copy;
2023–2024 嘉树.
本站遵循 <a href=https://creativecommons.org/licenses/by-nc/4.0/>CC-BY-NC 4.0</a> 协议</div></div><script src=/js/journal.js></script></body></html>